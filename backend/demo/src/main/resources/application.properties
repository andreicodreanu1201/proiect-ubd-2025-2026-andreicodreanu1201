# Supabase Postgres (DB)
spring.datasource.url=jdbc:postgresql://aws-1-eu-west-1.pooler.supabase.com:6543/postgres?sslmode=require&prepareThreshold=0
spring.datasource.username=postgres.stataltndlfdkuatygiy
spring.datasource.password=D@nny_porc2000
spring.datasource.driver-class-name=org.postgresql.Driver

# HikariCP settings
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.pool-name=HikariPool
spring.datasource.hikari.leak-detection-threshold=2000

# Disable prepared statement caching (already mostly done)
spring.datasource.hikari.dataSourceProperties.cachePrepStmts=false
spring.datasource.hikari.dataSourceProperties.prepStmtCacheSize=0
spring.datasource.hikari.dataSourceProperties.prepStmtCacheSqlLimit=0
spring.datasource.hikari.dataSourceProperties.useServerPrepStmts=false

# Hibernate settings
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.properties.hibernate.statement_cache.size=0
spring.jpa.properties.hibernate.jdbc.prepare_sql=false

# JWT validation - point to Supabase JWKS endpoint
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=https://stataltndlfdkuatygiy.supabase.co/auth/v1/.well-known/jwks.json
spring.security.oauth2.resourceserver.jwt.issuer-uri=https://stataltndlfdkuatygiy.supabase.co
